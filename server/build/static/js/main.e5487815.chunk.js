(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{170:function(e,t,n){},197:function(e,t,n){},381:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),c=n(49),o=n.n(c),a=(n(170),n(16)),l=n(5),s=n(3),d=n(22),u=n(53),j=function(){return Object(u.b)()},b=u.c,m=function(){return b((function(e){return e.user}))};var h=n(1);function g(e){var t=e.path,n=e.redirectTo,i=void 0===n?"/login":n,r=e.children,c=e.unauthenticatedComponent,o=Object(d.a)(e,["path","redirectTo","children","unauthenticatedComponent"]),a=m().isAuthenticated;return Object(h.jsx)(l.b,Object(s.a)(Object(s.a)({},o),{},{path:t,exact:!0,children:a?r:c||Object(h.jsx)(l.a,{to:{pathname:i,state:{from:t}}})}))}var O=n(4),f=n(44),x={isAuthenticated:!1,token:"",firstName:"",lastName:"",email:"",id:"",companyId:"",roles:[],validTill:new Date},p=Object(f.b)({name:"user",initialState:x,reducers:{addUser:function(e,t){var n;localStorage.setItem("TOKEN",JSON.stringify({token:t.payload.token,validTill:t.payload.issuedAt+t.payload.validTime})),e.isAuthenticated=!0,e.token=t.payload.token,e.firstName=t.payload.firstName,e.lastName=null!==(n=t.payload.lastName)&&void 0!==n?n:"",e.email=t.payload.email,e.id=t.payload.id,e.companyId=t.payload.companyId,e.roles=t.payload.roles,e.validTill=new Date(t.payload.issuedAt+t.payload.validTime)},removeUser:function(e){localStorage.removeItem("TOKEN"),e.isAuthenticated=!1,e.token="",e.firstName="",e.lastName="",e.email="",e.id="",e.roles=[],e.companyId="",e.validTill=new Date}}}),y=p.actions,v=y.addUser,C=y.removeUser,k=p.reducer,w=n(9),T=n.n(w),R=n(23),D=n(154),S=n.n(D).a.create({baseURL:"/",timeout:5e3}),A=function(){var e=Object(R.a)(T.a.mark((function e(t,n){var i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/api/login",{email:t,password:n});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=localStorage.getItem("TOKEN");if(e){var t=JSON.parse(e);if(t.validTill>(new Date).getTime())return t.token;throw new Error("TOKEN EXPIRED")}throw new Error("TOKEN NOT FOUND")},E=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(),e.next=3,S.get("/api/admin/user/online",{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(),e.next=3,S.get("/api/twillio/token",{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data.token}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(R.a)(T.a.mark((function e(t,n){var i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=I(),e.next=3,S.post("/api/twillio/outgoing/start",{from:t,to:n},{headers:{authorization:"Bearer "+i}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(),e.next=3,S.get("/api/call/analytics",{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=new Date;return e.setHours(23,59,59),e},z=function(){var e=Object(R.a)(T.a.mark((function e(){var t,n,i,r,c,o,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=I(),n=F().getTime(),i=n-864e5,r=[],c=0;case 5:if(!(c<10)){e.next=16;break}return e.next=8,S.post("/api/call/time",{startTime:i,endTime:n},{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data}));case 8:o=e.sent,a=new Date(n),r.push(Object(s.a)(Object(s.a)({},o),{},{label:a.toDateString()})),n-=864e5,i-=864e5;case 13:++c,e.next=5;break;case 16:return e.abrupt("return",r.reverse());case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=n.p+"static/media/login_bg.aad99272.png";function U(e){var t=Object.assign({},e);return Object(h.jsx)("input",Object(s.a)({style:{backgroundColor:"#EEE",border:"none",outline:"none",padding:"0.5em 1.2em",borderRadius:"1.2em"}},t))}function _(e){var t=e.title,n=e.children,i=e.isLink,r=e.href,c=e.style,o=Object(d.a)(e,["title","children","isLink","href","style"]);return Object(h.jsx)("button",Object(s.a)(Object(s.a)({style:Object(s.a)({padding:"0.5em 1.2em",backgroundColor:"#6E376E",color:"white",borderRadius:4,border:"none",cursor:"pointer"},c)},o),{},{children:i&&r?Object(h.jsx)(a.b,{to:r,children:t||n}):t||n}))}function W(){var e=j(),t=Object(l.g)(),n=m().isAuthenticated,r=Object(i.useState)(""),c=Object(O.a)(r,2),o=c[0],a=c[1],s=Object(i.useState)(!1),d=Object(O.a)(s,2),u=d[0],b=d[1];return n&&t.push("/"),console.log(M),Object(h.jsxs)("div",{style:{height:"100%",position:"relative",backgroundColor:"#5D4174"},children:[Object(h.jsx)("img",{src:M,alt:"BG",style:{top:0,bottom:0,right:0,position:"absolute",maxWidth:"100%",maxHeight:"100%",zIndex:0}}),Object(h.jsx)("div",{style:{position:"relative",zIndex:2,height:"100%"},children:Object(h.jsxs)("form",{action:"",style:{display:"flex",flexDirection:"column",maxWidth:"25%",height:"100%",justifyContent:"center",marginLeft:"10%"},onSubmit:function(n){n.preventDefault();var i=n.target;b(!0),A(i.email.value,i.password.value).then((function(n){e(v(n)),t.push("/"),b(!0)})).catch((function(e){var t,n,i;a(null!==(t=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)&&void 0!==t?t:"Something Went wrong"),b(!1)}))},children:[Object(h.jsx)("div",{style:{fontWeight:"bold",fontSize:"2em",color:"#C86CDB",width:"100%",textAlign:"center",margin:"1em 0"},children:"SIGN IN"}),Object(h.jsx)("div",{style:{margin:"1em 0",display:"flex",justifyContent:"center"},children:Object(h.jsx)(U,{name:"email",placeholder:"Username"})}),Object(h.jsx)("div",{style:{margin:"0 0",display:"flex",justifyContent:"center"},children:Object(h.jsx)(U,{name:"password",type:"password",placeholder:"Password"})}),o&&Object(h.jsx)("div",{style:{textAlign:"center",color:"red",marginTop:"0.5em"},children:o}),Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginTop:"2em"},children:Object(h.jsx)(_,{type:"submit",disabled:u,style:{background:"linear-gradient(90deg, #f26e87 0%, #f79b84 100%)",padding:"0.5em 2.5em"},children:u?"Loading...":"Login"})})]})})]})}function H(){var e=j(),t=Object(l.g)();return Object(i.useEffect)((function(){e(C()),t.push("/")}),[e,t]),Object(h.jsx)("div",{children:"Logging Out"})}var P=n(155),K=n.p+"static/media/MotiCo Logo.4801567b.png";function J(e){var t=e.Icon,n=e.title,i=e.link;return Object(h.jsx)(a.b,{to:i,style:{textDecoration:"none"},children:Object(h.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",marginBottom:"2rem",color:"white",alignItems:"center",cursor:"pointer",fontSize:"1.1rem"},children:[Object(h.jsx)(t,{style:{color:"#7EA0B1"}})," ",Object(h.jsx)("span",{style:{textTransform:"capitalize",color:"#B4B9C0"},children:n})]})})}var G=n(21),q=n(54);function Y(){return Object(h.jsxs)("div",{style:{padding:"1.5rem"},children:[Object(h.jsx)("img",{src:K,alt:"MotiCo",style:{objectFit:"contain",width:"100%"}}),Object(h.jsxs)("div",{style:{marginTop:"4rem"},children:[Object(h.jsx)(J,{Icon:G.b,title:"Dashboard",link:"/"}),Object(h.jsx)(J,{Icon:q.b,title:"numbers",link:"/numbers"}),Object(h.jsx)(J,{Icon:G.e,title:"users",link:"/call"}),Object(h.jsx)(J,{Icon:q.a,title:"teams",link:"/"}),Object(h.jsx)(J,{Icon:q.b,title:"numbers",link:"/"}),Object(h.jsx)(J,{Icon:G.e,title:"users",link:"/"}),Object(h.jsx)(J,{Icon:q.a,title:"teams",link:"/"})]})]})}var Q=n(96);function V(){var e=b((function(e){return e.notification})).notifications;return Object(h.jsxs)("div",{style:{backgroundColor:"white",textAlign:"right",padding:"1.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[Object(h.jsx)("span",{style:{fontSize:"2rem",marginRight:"1.5rem",cursor:"pointer"},children:e.length>0?Object(h.jsx)(Q.b,{style:{color:"#7EA0B1"}}):Object(h.jsx)(Q.a,{style:{color:"#7EA0B1"}})}),Object(h.jsx)(a.b,{to:"/logout",children:Object(h.jsx)(G.a,{style:{fontSize:"3rem",color:"#4F5F68",cursor:"pointer"}})})]})}var X=n.p+"static/media/live_activity.d2024e97.jpg",Z=n.p+"static/media/analytics.75012432.jpg",$=n.p+"static/media/call_summary.1fcd062f.jpg",ee=(n(197),function(e){var t=e.children,n=Object(d.a)(e,["children"]);return Object(h.jsx)("div",Object(s.a)(Object(s.a)({className:"card"},n),{},{children:t}))});function te(e){var t=e.title,n=e.body,i=e.style,r=e.theme,c=void 0===r?"dark":r,o=e.bodyTheme,a=void 0===o?"none":o,l=e.bodyStyle,d=void 0===l?{}:l,u=e.perToday;return Object(h.jsxs)(ee,{style:Object(s.a)({cursor:"pointer"},i),children:[Object(h.jsx)(ee.Header,{background:c,style:{padding:"0.75rem"},children:t}),Object(h.jsxs)(ee.Body,{background:a,style:Object(s.a)({textAlign:"center",paddingTop:"0.5rem",minHeight:"5em",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},d),children:[Object(h.jsx)("div",{style:{fontSize:"3rem"},children:n}),u&&Object(h.jsx)("div",{children:"Per Today"})]}),Object(h.jsx)(ee.Footer,{background:a,style:Object(s.a)({},d)})]})}function ne(){return Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(h.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Dashboard"})}),Object(h.jsxs)("div",{style:{backgroundColor:"#F2F6F7",padding:"2rem 2.5rem",display:"flex",gap:"1rem"},children:[Object(h.jsx)("div",{style:{flex:2,display:"flex",gap:"1rem"},children:Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(h.jsxs)("div",{style:{display:"flex",gap:"1em",marginBottom:"1em"},children:[Object(h.jsx)(a.b,{to:"/call-summary",style:{textDecoration:"none"},children:Object(h.jsx)("img",{src:$,alt:"Cal Summary",style:{borderRadius:"8px"}})}),Object(h.jsx)(a.b,{to:"/live-activity",style:{textDecoration:"none"},children:Object(h.jsx)("img",{src:X,alt:"Live Activity",style:{borderRadius:"8px"}})})]}),Object(h.jsx)(a.b,{to:"/analytics",style:{textDecoration:"none"},children:Object(h.jsx)("img",{src:Z,alt:"Analytics",style:{borderRadius:"8px"}})})]})}),Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)(te,{title:"Total Numbers",body:"345",theme:"light",style:{marginBottom:"1.5em"}}),Object(h.jsx)(te,{title:"Free Incoming Min",body:"2,300 Min",theme:"dark",style:{marginBottom:"1.5em"}}),Object(h.jsx)(te,{title:"Total Users",body:"345",theme:"light"})]})]})]})}function ie(e){var t=e.url,n=e.size,i=e.name,r=e.color,c=void 0===r?"#4F5F68":r,o=e.dotColor,a=e.dotSize,l=void 0===a?10:a;return Object(h.jsxs)("div",{style:{width:n,height:n,position:"relative"},children:[t?Object(h.jsx)("img",{src:t,style:{borderRadius:"50%",objectFit:"contain",width:"87%",height:"87%",border:"1px solid black"},alt:i}):Object(h.jsx)(G.a,{size:n,color:c}),o&&Object(h.jsx)("span",{style:{width:l,height:l,backgroundColor:o,borderRadius:"50%",position:"absolute",bottom:"10%",right:"10%"}})]})}ee.Header=function(e){var t=e.children,n=e.background,i=void 0===n?"dark":n,r=Object(d.a)(e,["children","background"]);return Object(h.jsx)("div",Object(s.a)(Object(s.a)({className:"card-title bg-".concat(i)},r),{},{children:t}))},ee.Body=function(e){var t=e.children,n=e.background,i=void 0===n?"none":n,r=Object(d.a)(e,["children","background"]);return Object(h.jsx)("div",Object(s.a)(Object(s.a)({className:"card-body bg-".concat(i)},r),{},{children:t}))},ee.Footer=function(e){var t=e.children,n=e.background,i=void 0===n?"none":n,r=Object(d.a)(e,["children","background"]);return Object(h.jsx)("div",Object(s.a)(Object(s.a)({className:"card-footer bg-".concat(i)},r),{},{children:t}))};var re=n.p+"static/media/online.47ef7df0.jpg";function ce(){var e=m().firstName,t=Object(i.useState)({inbound:0,outgoing:0,missed:0,total:0,averageMinutes:0}),n=Object(O.a)(t,2),r=n[0],c=r.inbound,o=r.outgoing,a=r.missed,l=r.total,s=r.averageMinutes,d=n[1];return Object(i.useEffect)((function(){L().then(d)}),[]),Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(h.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Call Summary"})}),Object(h.jsxs)("div",{style:{display:"flex",flex:1,gap:"1.5em",padding:"2rem"},children:[Object(h.jsx)("div",{style:{flex:1,display:"flex"},children:Object(h.jsxs)(ee,{style:{width:"100%"},children:[Object(h.jsx)(ee.Header,{background:"none"}),Object(h.jsxs)(ee.Body,{style:{height:"90%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(h.jsxs)("div",{style:{alignItems:"center",display:"flex",marginTop:"2em",flexDirection:"column"},children:[Object(h.jsx)(ie,{size:100}),Object(h.jsx)("div",{style:{marginTop:"0.5em",fontWeight:"bold",fontSize:"2em",color:"rgb(110,55,110)"},children:e})]}),Object(h.jsxs)("div",{style:{alignItems:"center",display:"flex",marginBottom:"1.7em",flexDirection:"column"},children:[Object(h.jsx)("img",{src:re,alt:"Online",style:{marginBottom:"1em"}}),Object(h.jsx)("div",{style:{marginBottom:"0.5em"},children:"Total Calls Made"}),Object(h.jsx)("div",{style:{fontSize:"2em"},children:l})]})]}),Object(h.jsx)(ee.Footer,{})]})}),Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)(te,{title:"Total Calls",body:c+o+a,theme:"gradient",style:{marginBottom:"1.5rem"},perToday:!0}),Object(h.jsx)(te,{title:"Total Outbound",body:o,theme:"light",style:{marginBottom:"1.5rem"},perToday:!0}),Object(h.jsx)(te,{title:"Total Successful Calls",body:"2,300",perToday:!0})]}),Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)(te,{title:"Total Inbound",body:c,theme:"light",style:{marginBottom:"1.5rem"},perToday:!0}),Object(h.jsx)(te,{title:"Total Missed Calls",body:a,style:{marginBottom:"1.5rem"},perToday:!0}),Object(h.jsx)(te,{title:"Average Call Duration",theme:"light",body:"".concat(Number(null!==s&&void 0!==s?s:0).toFixed(2)," Min"),perToday:!0})]})]})]})}var oe=n(164),ae={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};function le(){var e=Object(i.useState)({labels:["1","2","3","4","5","6"],datasets:[{label:"Total Outbound Calls",data:[12,19,3,5,2,3],fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"},{label:"Total Missed Calls",data:[19,11,32,51,21,33],fill:!1},{label:"Total Inbound Calls",data:[2,1,12,51,10,3],fill:!1}]}),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){z().then((function(e){var t=e.map((function(e){return e.label})),n=e.map((function(e){return e.inbound})),i=e.map((function(e){return e.outgoing})),c=e.map((function(e){return e.missed}));r({labels:t,datasets:[{label:"Total Outbound Calls",data:i,fill:!1,backgroundColor:"rgb(110, 55, 110)",borderColor:"rgba(110, 55, 110, 0.2)"},{label:"Total Inbound Calls",data:n,fill:!1,backgroundColor:"rgb(255,157,130)",borderColor:"rgba(255,157,130, 0.2)"},{label:"Total Missed Calls",data:c,fill:!1,backgroundColor:"rgb(201,75,123)",borderColor:"rgba(201,75,123, 0.2)"}]})}))}),[]),Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(h.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Analytics"})}),Object(h.jsx)("div",{style:{display:"flex",flex:1,gap:"1.5em",padding:"2rem"},children:Object(h.jsx)(ee,{style:{minHeight:300,width:"100%"},children:Object(h.jsx)(ee.Body,{style:{minHeight:300,width:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"0.5em"},children:Object(h.jsx)(oe.a,{type:"line",height:70,data:n,options:ae})})})})]})}var se=n(8),de=n(159),ue=n.n(de),je=n(160),be=n.n(je),me=n(68);function he(e){var t,n,r=e.token,c=e.onDisconnect,o=e.callRecordID,a=Object(i.useState)(""),l=Object(O.a)(a,2),s=l[0],d=l[1],u=Object(i.useRef)(),j=Object(i.useRef)(),b=Object(i.useState)(!0),m=Object(O.a)(b,2),g=m[0],f=m[1],x=Object(i.useRef)("");(Object(i.useEffect)((function(){if(r){var e=new me.Device(r,{fakeLocalDTMF:!0,enableRingingState:!0});return u.current=e,e.on("ready",(function(){console.log("Twilio.Device Ready!"),d("Ready")})),e.on("error",(function(e){console.log("Twilio.Device Error: "+e.message),d("ERROR: "+e.message)})),e.on("connect",(function(e){console.log("Successfully established call!"),d("In call")})),e.on("disconnect",(function(t){console.log("Disconnected"),d("Disconnect -> Ready"),e.destroy(),c()})),function(){e.disconnectAll(),e.destroy(),c()}}}),[r]),g&&!(null===(t=j.current)||void 0===t?void 0:t.isMuted()))&&(null===(n=j.current)||void 0===n||n.mute(!0));return u?Object(h.jsxs)("div",{style:{marginTop:10},children:[Object(h.jsxs)("h3",{children:["Device Status : ",Object(h.jsx)("code",{children:s})]}),Object(h.jsx)("button",{style:{marginRight:20},onClick:Object(R.a)(T.a.mark((function e(){var t,n,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.current=o,null===(i=null===(t=u.current)||void 0===t?void 0:t.connect({callRecordID:o,isAdmin:"true"}))||void 0===i||i.mute(!0),j.current=i,null===(n=j.current)||void 0===n||n.mute(!0);case 5:case"end":return e.stop()}}),e)}))),children:"Connect"}),Object(h.jsx)("button",{onClick:function(){var e,t;null===(e=u.current)||void 0===e||e.disconnectAll(),null===(t=u.current)||void 0===t||t.destroy()},children:"Disconnect"}),Object(h.jsxs)("div",{children:["You are ",g?"muted":"not muted",Object(h.jsx)("button",{onClick:function(){var e;f(!g),null===(e=j.current)||void 0===e||e.mute(!g)},children:g?"UnMute":"Mute"})]})]}):Object(h.jsx)("div",{style:{marginTop:10},children:"Creating Device"})}function ge(e){var t=e.query,n=e.onDisconnect,r=Object(i.useState)(""),c=Object(O.a)(r,2),o=c[0],a=c[1],s=Object(i.useState)(!0),d=Object(O.a)(s,2),u=d[0],j=d[1],b=Object(l.g)();return Object(i.useEffect)((function(){B().then(a)}),[]),console.log("Called"),Object(i.useEffect)((function(){u||b.goBack()}),[u,b]),t?Object(h.jsx)("div",{children:o&&u?Object(h.jsx)(he,{token:o,onDisconnect:function(){j(!1),n()},callRecordID:t}):"Loading"}):Object(h.jsx)("div",{children:"Invalid Page"})}var Oe=n.p+"static/media/barge.a63441f7.jpg",fe=n.p+"static/media/whispher.b1214fea.jpg";function xe(e){var t=e.liveCalls,n=Object(i.useState)(""),r=Object(O.a)(n,2),c=r[0],o=r[1],a=Object(i.useState)(!1),l=Object(O.a)(a,2),s=l[0],d=l[1];return Object(h.jsxs)("div",{style:{backgroundColor:"white",padding:"1em",borderRadius:"4px",minHeight:"10em"},children:[Object(h.jsx)(be.a,{isOpen:s,style:{overlay:{zIndex:10}},children:s&&Object(h.jsx)(ge,{query:c,onDisconnect:function(){return d(!1)}})}),Object(h.jsxs)("table",{style:{width:"100%"},children:[Object(h.jsxs)("tr",{style:{color:"#6C7A81"},children:[Object(h.jsx)("th",{style:{fontWeight:"normal"},children:"Agent"}),Object(h.jsx)("th",{style:{fontWeight:"normal"},children:"From"}),Object(h.jsx)("th",{style:{fontWeight:"normal"},children:"To"}),Object(h.jsx)("th",{style:{fontWeight:"normal"},children:"Start Time"}),Object(h.jsx)("th",{style:{fontWeight:"normal"},children:"Status"}),Object(h.jsx)("th",{style:{fontWeight:"normal"},children:"Function"})]}),t.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.agent}),Object(h.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.from}),Object(h.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.to}),Object(h.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:new Date(e.startTime).toLocaleTimeString()}),Object(h.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.status}),Object(h.jsxs)("td",{style:{textAlign:"center",paddingTop:"1em",cursor:"pointer",display:"flex",justifyContent:"center"},onClick:function(){o(e.id),d(!0)},children:[Object(h.jsx)("img",{src:Oe,style:{borderRadius:"50%",objectFit:"contain",marginRight:"0.5em"},width:20,alt:""}),Object(h.jsx)("img",{src:fe,style:{borderRadius:"50%",objectFit:"contain"},width:20,alt:""})]})]})}))]})]})}var pe=n(161),ye=r.a.createContext(void 0),ve="START_CONNECTION",Ce="USER_ONLINE",ke="USER_LOGOUT",we="USER_CALL_START",Te="USER_CALL_END",Re="CALL_ADD",De="CALL_END",Se="CALL_ADD_CSID";function Ae(e){var t=e.children,n=Object(i.useState)(null),r=Object(O.a)(n,2),c=r[0],o=r[1],a=m(),l=a.isAuthenticated,s=a.email;return Object(i.useEffect)((function(){if(l){var e=Object(pe.io)("/");e.emit(ve,{email:s}),o(e)}else c&&c.disconnect()}),[l,s]),Object(h.jsx)(ye.Provider,{value:c,children:t})}var Ie=function(){return Object(i.useContext)(ye)},Ee=function(e){var t=e.name,n=Object(d.a)(e,["name"]);return Object(h.jsxs)("div",{style:{marginRight:"2rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)(ie,Object(s.a)({},n)),Object(h.jsx)("div",{children:t})]})};function Be(){var e=Ie(),t=Object(i.useState)([]),n=Object(O.a)(t,2),r=n[0],c=n[1],o=Object(i.useState)([]),a=Object(O.a)(o,2),l=a[0],s=a[1];return Object(i.useEffect)((function(){E().then((function(e){c(e)})),e.on(Ce,(function(e){console.log("User Online",e),c((function(t){return[].concat(Object(se.a)(t),[e])}))})),e.on(ke,(function(e){console.log("User Offline",e),c((function(t){return t.filter((function(t){return t.id!==e.id}))}))})),e.on(Re,(function(e){console.log("Call Started",e),s((function(t){return[].concat(Object(se.a)(t),[e])}))})),e.on(De,(function(e){console.log("Call Ended",e),s((function(t){return t.filter((function(t){return t.id!==e.id}))}))}))}),[]),Object(h.jsxs)("div",{style:{flex:1},children:[Object(h.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(h.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Live Activity"})}),Object(h.jsxs)("div",{style:{background:"white",margin:"1.5em 1.5em",padding:"0.75em"},children:[Object(h.jsx)("div",{style:{color:"#4f5f68",marginLeft:"1.5em",marginBottom:"1.5em"},children:"Available Person on Call"}),Object(h.jsx)(ue.a,{data:r.map((function(e){var t=e.name,n=e.id,i=e.avatarURL;return Object(h.jsx)(Ee,{name:t,size:50,url:i,dotColor:"#05B714"},n)})),wrapperStyle:{width:"100%"},arrowLeft:Object(h.jsx)(G.c,{size:32}),arrowRight:Object(h.jsx)(G.d,{size:32})})]}),Object(h.jsxs)("div",{style:{display:"flex",gap:"1.5em",margin:"2em"},children:[Object(h.jsx)(te,{title:"Available Agent",body:r.length,style:{flex:1}}),Object(h.jsx)(te,{title:"Calls In Queue",body:0,style:{flex:1},bodyTheme:"gradient"}),Object(h.jsx)(te,{title:"Live Calls",body:l.length,style:{flex:1},bodyTheme:"orange"})]}),Object(h.jsx)("div",{style:{marginTop:"1.5em",backgroundColor:"#71386f",color:"white",width:"fit-content",padding:"0.5em 1.5em",marginLeft:"2em",borderRadius:"8px 8px 0 0"},children:"Live Calls"}),Object(h.jsx)("div",{style:{margin:"0 2em",backgroundColor:"#71386f",borderRadius:"0 8px 8px 8px "},children:Object(h.jsx)(xe,{liveCalls:l})})]})}function Ne(e){var t=e.phoneNumber,n=e.token,r=e.onDisconnect,c=Object(i.useState)(""),o=Object(O.a)(c,2),a=o[0],l=o[1],s=Object(i.useState)(null),d=Object(O.a)(s,2),u=d[0],j=d[1],b=Object(i.useRef)(),m=Ie(),g=Object(i.useRef)(""),f=Object(i.useState)(!1),x=Object(O.a)(f,2),p=x[0],y=x[1];return Object(i.useEffect)((function(){if(n){var e=new me.Device(n,{fakeLocalDTMF:!0,enableRingingState:!0});return j(e),e.on("ready",(function(){console.log("Twilio.Device Ready!"),l("Ready")})),e.on("error",(function(e){console.log("Twilio.Device Error: "+e.message),l("ERROR: "+e.message)})),e.on("connect",(function(e){console.log("Successfully established call!"),l("In call with "+t),console.log(e),m.emit(Se,{callId:g.current,csid:e.parameters.CallSid}),m.emit(we,{callID:g.current})})),e.on("disconnect",(function(t){console.log("Disconnected"),l("Disconnect -> Ready"),m.emit(Te,{callID:g.current}),e.destroy(),r()})),function(){e.disconnectAll(),e.destroy(),r()}}}),[n]),u?Object(h.jsxs)("div",{style:{marginTop:10},children:[Object(h.jsxs)("h3",{children:["Device Status : ",Object(h.jsx)("code",{children:a})]}),Object(h.jsx)("button",{style:{marginRight:20},onClick:Object(R.a)(T.a.mark((function e(){var n,i,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("+18564153631","+91"+t);case 2:n=e.sent,i=n.callRecordID,g.current=i,r=u.connect({from:"+18564153631",to:"+91"+t,callRecordID:i,isAdmin:"false"}),b.current=r;case 7:case"end":return e.stop()}}),e)}))),children:"Connect"}),Object(h.jsx)("button",{onClick:function(){u.disconnectAll(),u.destroy()},children:"Disconnect"}),Object(h.jsxs)("div",{children:["You are ",p?"muted":"not muted",Object(h.jsx)("button",{onClick:function(){var e;y(!p),null===(e=b.current)||void 0===e||e.mute(!p)},children:p?"UnMute":"Mute"})]})]}):Object(h.jsx)("div",{style:{marginTop:10},children:"Creating Device"})}function Le(){var e=Object(i.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(""),o=Object(O.a)(c,2),a=o[0],l=o[1],s=Object(i.useState)(!1),d=Object(O.a)(s,2),u=d[0],j=d[1];return Object(i.useEffect)((function(){B().then(l)}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"number",value:n,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("button",{onClick:function(){return j(!0)},children:"Call"}),u&&Object(h.jsx)(Ne,{phoneNumber:n,token:a,onDisconnect:function(){j(!1)}})]})}function Fe(){var e=Object(i.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){(function(){var e=I();return S.get("/api/phonenumber/registered",{headers:{authorization:"Bearer "+e}}).then((function(e){return e.data}))})().then(r)}),[]),Object(h.jsx)("div",{style:{padding:"1.5em"},children:Object(h.jsxs)("div",{style:{backgroundColor:"white",borderRadius:8,padding:"2em"},children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.2em",flex:1.5},children:"Number"}),Object(h.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between"},children:[Object(h.jsx)(U,{placeholder:"Search For"}),Object(h.jsx)(_,{children:"Buy Number"})]})]}),Object(h.jsx)("div",{style:{marginTop:"2em"},children:Object(h.jsxs)("table",{style:{width:"100%"},children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{style:{color:"white",padding:"0.3em",borderRadius:"0.5em",background:"linear-gradient(90deg, #6f374c 0%, #c94b7c 100%)"},children:"Name"}),Object(h.jsx)("th",{style:{color:"white",padding:"0.5em 0.3em",borderRadius:"0.5em",background:"linear-gradient(90deg, #813866 0%, #ff9d82 100%)"},children:"Phone Number"}),Object(h.jsx)("th",{style:{color:"white",padding:"0.5em 0.3em",borderRadius:"0.5em",background:"linear-gradient(90deg, #6f374c 0%, #c94b7c 100%)"},children:"Recording"}),Object(h.jsx)("th",{style:{color:"white",padding:"0.5em 0.3em",borderRadius:"0.5em",background:"linear-gradient(90deg, #813866 0%, #ff9d82 100%)"},children:"Voicemail"}),Object(h.jsx)("th",{style:{color:"white",padding:"0.5em 0.3em",borderRadius:"0.5em",background:"linear-gradient(90deg, #6f374c 0%, #c94b7c 100%)"},children:"Availability"}),Object(h.jsx)("th",{style:{color:"white",padding:"0.5em 0.3em",borderRadius:"0.5em",background:"linear-gradient(90deg, #813866 0%, #ff9d82 100%)"},children:"Alloted"})]}),Object(h.jsx)("div",{style:{marginTop:"1.5em"}}),n.map((function(e,t){return Object(h.jsxs)("tr",{style:{marginTop:"2em",backgroundColor:"#EFF3F4",borderRadius:8},children:[Object(h.jsx)("td",{style:{borderRadius:0,textAlign:"center",padding:"0.5em",backgroundColor:t%2!==0?"white":void 0},children:e.name}),Object(h.jsx)("td",{style:{borderRadius:0,textAlign:"center",padding:"0.5em",backgroundColor:t%2!==0?"white":void 0},children:e.number}),Object(h.jsx)("td",{style:{borderRadius:0,textAlign:"center",padding:"0.5em",backgroundColor:t%2!==0?"white":void 0},children:e.isRecording?"Enabled":"Disabled"}),Object(h.jsx)("td",{style:{borderRadius:0,textAlign:"center",padding:"0.5em",backgroundColor:t%2!==0?"white":void 0},children:e.voiceMail?"Enabled":"Disabled"}),Object(h.jsx)("td",{style:{borderRadius:0,textAlign:"center",padding:"0.5em",backgroundColor:t%2!==0?"white":void 0},children:e.available?"Available":"Not Available"}),Object(h.jsx)("td",{style:{borderRadius:0,textAlign:"center",padding:"0.5em",backgroundColor:t%2!==0?"white":void 0},children:e.assignedTo.length})]},e._id)}))]})})]})})}function ze(){var e=m().isAuthenticated;return Object(h.jsx)(a.a,{children:Object(h.jsx)(l.d,{children:Object(h.jsxs)(P.a,{sidebar:Object(h.jsx)(Y,{}),docked:e,styles:{sidebar:{backgroundColor:"#2B3144",boxShadow:"none",maxWidth:"15vw",width:"15vw",borderRadius:"0 0.3rem 0.3rem 0"},content:{backgroundColor:"#F2F6F7"}},children:[e&&Object(h.jsx)(V,{}),Object(h.jsx)(l.b,{path:"/login",component:W}),Object(h.jsx)(l.b,{path:"/logout",component:H}),Object(h.jsx)(g,{path:"/call",redirectTo:"/login",children:Object(h.jsx)(Le,{})}),Object(h.jsx)(g,{path:"/live-activity",redirectTo:"/login",children:Object(h.jsx)(Be,{})}),Object(h.jsx)(g,{path:"/analytics",redirectTo:"/login",children:Object(h.jsx)(le,{})}),Object(h.jsx)(g,{path:"/call-summary",redirectTo:"/login",children:Object(h.jsx)(ce,{})}),Object(h.jsx)(g,{path:"/",redirectTo:"/login",children:Object(h.jsx)(ne,{})}),Object(h.jsx)(g,{path:"/numbers",redirectTo:"/login",children:Object(h.jsx)(Fe,{})})]})})})}var Me=n(11),Ue=n(165),_e=n(162),We=n.n(_e),He=Object(f.b)({name:"notification",initialState:{notifications:[]},reducers:{addNotification:function(e,t){e.notifications.unshift(t.payload)},removeNotification:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t.payload}))}}}),Pe=He.actions,Ke=(Pe.addNotification,Pe.removeNotification,He.reducer),Je=n(52),Ge={key:"root",storage:We.a},qe=Object(Me.c)({user:k,notification:Ke}),Ye=Object(Ue.a)(Ge,qe),Qe=Object(f.a)({reducer:Ye,devTools:!1,middleware:[Je.a]}),Ve=n(163),Xe=n(67),Ze=Object(Xe.a)(Qe);var $e=function(){return Object(h.jsx)(u.a,{store:Qe,children:Object(h.jsx)(Ve.a,{loading:null,persistor:Ze,children:Object(h.jsx)(Ae,{children:Object(h.jsx)(ze,{})})})})},et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,382)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),c(e),o(e)}))};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)($e,{})}),document.getElementById("root")),et()}},[[381,1,2]]]);
//# sourceMappingURL=main.e5487815.chunk.js.map