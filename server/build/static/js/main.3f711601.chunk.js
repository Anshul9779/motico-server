(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{170:function(e,t,n){},197:function(e,t,n){},381:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),c=n(49),o=n.n(c),a=(n(170),n(20)),l=n(3),s=n(7),d=n(33),u=n(53),j=function(){return Object(u.b)()},b=u.c,m=function(){return b((function(e){return e.user}))};var O=n(1);function f(e){var t=e.path,n=e.redirectTo,r=void 0===n?"/login":n,i=e.children,c=e.unauthenticatedComponent,o=Object(d.a)(e,["path","redirectTo","children","unauthenticatedComponent"]),a=m().isAuthenticated;return Object(O.jsx)(l.b,Object(s.a)(Object(s.a)({},o),{},{path:t,exact:!0,children:a?i:c||Object(O.jsx)(l.a,{to:{pathname:r,state:{from:t}}})}))}var h=n(44),x={isAuthenticated:!1,token:"",firstName:"",lastName:"",email:"",id:"",companyId:"",roles:[],validTill:new Date},g=Object(h.b)({name:"user",initialState:x,reducers:{addUser:function(e,t){var n;localStorage.setItem("TOKEN",JSON.stringify({token:t.payload.token,validTill:t.payload.issuedAt+t.payload.validTime})),e.isAuthenticated=!0,e.token=t.payload.token,e.firstName=t.payload.firstName,e.lastName=null!==(n=t.payload.lastName)&&void 0!==n?n:"",e.email=t.payload.email,e.id=t.payload.id,e.companyId=t.payload.companyId,e.roles=t.payload.roles,e.validTill=new Date(t.payload.issuedAt+t.payload.validTime)},removeUser:function(e){localStorage.removeItem("TOKEN"),e.isAuthenticated=!1,e.token="",e.firstName="",e.lastName="",e.email="",e.id="",e.roles=[],e.companyId="",e.validTill=new Date}}}),p=g.actions,y=p.addUser,v=p.removeUser,C=g.reducer,T=n(9),k=n.n(T),w=n(22),D=n(154),S=n.n(D).a.create({baseURL:"/",timeout:5e3}),A=function(){var e=Object(w.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/api/login",{email:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=localStorage.getItem("TOKEN");if(e){var t=JSON.parse(e);if(t.validTill>(new Date).getTime())return t.token;throw new Error("TOKEN EXPIRED")}throw new Error("TOKEN NOT FOUND")},I=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(),e.next=3,S.get("/api/admin/user/online",{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(),e.next=3,S.get("/api/twillio/token",{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data.token}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(w.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(),e.next=3,S.post("/api/twillio/outgoing/start",{from:t,to:n},{headers:{authorization:"Bearer "+r}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(),e.next=3,S.get("/api/call/analytics",{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=new Date;return e.setHours(23,59,59),e},F=function(){var e=Object(w.a)(k.a.mark((function e(){var t,n,r,i,c,o,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=R(),n=L().getTime(),r=n-864e5,i=[],c=0;case 5:if(!(c<10)){e.next=16;break}return e.next=8,S.post("/api/call/time",{startTime:r,endTime:n},{headers:{authorization:"Bearer "+t}}).then((function(e){return e.data}));case 8:o=e.sent,a=new Date(n),i.push(Object(s.a)(Object(s.a)({},o),{},{label:a.toDateString()})),n-=864e5,r-=864e5;case 13:++c,e.next=5;break;case 16:return e.abrupt("return",i.reverse());case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function z(){var e=j(),t=Object(l.g)();return m().isAuthenticated&&t.push("/"),Object(O.jsx)("div",{style:{backgroundColor:"#F2F6F7"},children:Object(O.jsxs)("form",{action:"",onSubmit:function(n){n.preventDefault();var r=n.target;A(r.email.value,r.password.value).then((function(n){e(y(n)),t.push("/")}))},children:[Object(O.jsx)("input",{type:"text",name:"email",placeholder:"Email"}),Object(O.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(O.jsx)("button",{type:"submit",children:"Login"})]})})}function M(){var e=j(),t=Object(l.g)();return Object(r.useEffect)((function(){e(v()),t.push("/")}),[e,t]),Object(O.jsx)("div",{children:"Logging Out"})}var U=n(155),_=n.p+"static/media/MotiCo Logo.4801567b.png";function H(e){var t=e.Icon,n=e.title,r=e.link;return Object(O.jsx)(a.b,{to:r,style:{textDecoration:"none"},children:Object(O.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",marginBottom:"2rem",color:"white",alignItems:"center",cursor:"pointer",fontSize:"1.1rem"},children:[Object(O.jsx)(t,{style:{color:"#7EA0B1"}})," ",Object(O.jsx)("span",{style:{textTransform:"capitalize",color:"#B4B9C0"},children:n})]})})}var P=n(21),W=n(54);function K(){return Object(O.jsxs)("div",{style:{padding:"1.5rem"},children:[Object(O.jsx)("img",{src:_,alt:"MotiCo",style:{objectFit:"contain",width:"100%"}}),Object(O.jsxs)("div",{style:{marginTop:"4rem"},children:[Object(O.jsx)(H,{Icon:P.b,title:"Dashboard",link:"/"}),Object(O.jsx)(H,{Icon:W.b,title:"numbers",link:"/call"}),Object(O.jsx)(H,{Icon:P.e,title:"users",link:"/"}),Object(O.jsx)(H,{Icon:W.a,title:"teams",link:"/"}),Object(O.jsx)(H,{Icon:W.b,title:"numbers",link:"/"}),Object(O.jsx)(H,{Icon:P.e,title:"users",link:"/"}),Object(O.jsx)(H,{Icon:W.a,title:"teams",link:"/"})]})]})}var J=n(96);function q(){var e=b((function(e){return e.notification})).notifications;return Object(O.jsxs)("div",{style:{backgroundColor:"white",textAlign:"right",padding:"1.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[Object(O.jsx)("span",{style:{fontSize:"2rem",marginRight:"1.5rem",cursor:"pointer"},children:e.length>0?Object(O.jsx)(J.b,{style:{color:"#7EA0B1"}}):Object(O.jsx)(J.a,{style:{color:"#7EA0B1"}})}),Object(O.jsx)(a.b,{to:"/logout",children:Object(O.jsx)(P.a,{style:{fontSize:"3rem",color:"#4F5F68",cursor:"pointer"}})})]})}var Y=n.p+"static/media/live_activity.d2024e97.jpg",G=n.p+"static/media/analytics.75012432.jpg",Q=n.p+"static/media/call_summary.1fcd062f.jpg",X=(n(197),function(e){var t=e.children,n=Object(d.a)(e,["children"]);return Object(O.jsx)("div",Object(s.a)(Object(s.a)({className:"card"},n),{},{children:t}))});function Z(e){var t=e.title,n=e.body,r=e.style,i=e.theme,c=void 0===i?"dark":i,o=e.bodyTheme,a=void 0===o?"none":o,l=e.bodyStyle,d=void 0===l?{}:l,u=e.perToday;return Object(O.jsxs)(X,{style:Object(s.a)({cursor:"pointer"},r),children:[Object(O.jsx)(X.Header,{background:c,style:{padding:"0.75rem"},children:t}),Object(O.jsxs)(X.Body,{background:a,style:Object(s.a)({textAlign:"center",paddingTop:"0.5rem",minHeight:"5em",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},d),children:[Object(O.jsx)("div",{style:{fontSize:"3rem"},children:n}),u&&Object(O.jsx)("div",{children:"Per Today"})]}),Object(O.jsx)(X.Footer,{background:a,style:Object(s.a)({},d)})]})}function V(){return Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(O.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Dashboard"})}),Object(O.jsxs)("div",{style:{backgroundColor:"#F2F6F7",padding:"2rem 2.5rem",display:"flex",gap:"1rem"},children:[Object(O.jsx)("div",{style:{flex:2,display:"flex",gap:"1rem"},children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsxs)("div",{style:{display:"flex",gap:"1em",marginBottom:"1em"},children:[Object(O.jsx)(a.b,{to:"/call-summary",style:{textDecoration:"none"},children:Object(O.jsx)("img",{src:Q,alt:"Cal Summary",style:{borderRadius:"8px"}})}),Object(O.jsx)(a.b,{to:"/live-activity",style:{textDecoration:"none"},children:Object(O.jsx)("img",{src:Y,alt:"Live Activity",style:{borderRadius:"8px"}})})]}),Object(O.jsx)(a.b,{to:"/analytics",style:{textDecoration:"none"},children:Object(O.jsx)("img",{src:G,alt:"Analytics",style:{borderRadius:"8px"}})})]})}),Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)(Z,{title:"Total Numbers",body:"345",theme:"light",style:{marginBottom:"1.5em"}}),Object(O.jsx)(Z,{title:"Free Incoming Min",body:"2,300 Min",theme:"dark",style:{marginBottom:"1.5em"}}),Object(O.jsx)(Z,{title:"Total Users",body:"345",theme:"light"})]})]})]})}X.Header=function(e){var t=e.children,n=e.background,r=void 0===n?"dark":n,i=Object(d.a)(e,["children","background"]);return Object(O.jsx)("div",Object(s.a)(Object(s.a)({className:"card-title bg-".concat(r)},i),{},{children:t}))},X.Body=function(e){var t=e.children,n=e.background,r=void 0===n?"none":n,i=Object(d.a)(e,["children","background"]);return Object(O.jsx)("div",Object(s.a)(Object(s.a)({className:"card-body bg-".concat(r)},i),{},{children:t}))},X.Footer=function(e){var t=e.children,n=e.background,r=void 0===n?"none":n,i=Object(d.a)(e,["children","background"]);return Object(O.jsx)("div",Object(s.a)(Object(s.a)({className:"card-footer bg-".concat(r)},i),{},{children:t}))};var $=n(5);function ee(e){var t=e.url,n=e.size,r=e.name,i=e.color,c=void 0===i?"#4F5F68":i,o=e.dotColor,a=e.dotSize,l=void 0===a?10:a;return Object(O.jsxs)("div",{style:{width:n,height:n,position:"relative"},children:[t?Object(O.jsx)("img",{src:t,style:{borderRadius:"50%",objectFit:"contain",width:"87%",height:"87%",border:"1px solid black"},alt:r}):Object(O.jsx)(P.a,{size:n,color:c}),o&&Object(O.jsx)("span",{style:{width:l,height:l,backgroundColor:o,borderRadius:"50%",position:"absolute",bottom:"10%",right:"10%"}})]})}var te=n.p+"static/media/online.47ef7df0.jpg";function ne(){var e=m().firstName,t=Object(r.useState)({inbound:0,outgoing:0,missed:0,total:0,averageMinutes:0}),n=Object($.a)(t,2),i=n[0],c=i.inbound,o=i.outgoing,a=i.missed,l=i.total,s=i.averageMinutes,d=n[1];return Object(r.useEffect)((function(){N().then(d)}),[]),Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(O.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Call Summary"})}),Object(O.jsxs)("div",{style:{display:"flex",flex:1,gap:"1.5em",padding:"2rem"},children:[Object(O.jsx)("div",{style:{flex:1,display:"flex"},children:Object(O.jsxs)(X,{style:{width:"100%"},children:[Object(O.jsx)(X.Header,{background:"none"}),Object(O.jsxs)(X.Body,{style:{height:"90%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(O.jsxs)("div",{style:{alignItems:"center",display:"flex",marginTop:"2em",flexDirection:"column"},children:[Object(O.jsx)(ee,{size:100}),Object(O.jsx)("div",{style:{marginTop:"0.5em",fontWeight:"bold",fontSize:"2em",color:"rgb(110,55,110)"},children:e})]}),Object(O.jsxs)("div",{style:{alignItems:"center",display:"flex",marginBottom:"1.7em",flexDirection:"column"},children:[Object(O.jsx)("img",{src:te,alt:"Online",style:{marginBottom:"1em"}}),Object(O.jsx)("div",{style:{marginBottom:"0.5em"},children:"Total Calls Made"}),Object(O.jsx)("div",{style:{fontSize:"2em"},children:l})]})]}),Object(O.jsx)(X.Footer,{})]})}),Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)(Z,{title:"Total Calls",body:c+o+a,theme:"gradient",style:{marginBottom:"1.5rem"},perToday:!0}),Object(O.jsx)(Z,{title:"Total Outbound",body:o,theme:"light",style:{marginBottom:"1.5rem"},perToday:!0}),Object(O.jsx)(Z,{title:"Total Successful Calls",body:"2,300",perToday:!0})]}),Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)(Z,{title:"Total Inbound",body:c,theme:"light",style:{marginBottom:"1.5rem"},perToday:!0}),Object(O.jsx)(Z,{title:"Total Missed Calls",body:a,style:{marginBottom:"1.5rem"},perToday:!0}),Object(O.jsx)(Z,{title:"Average Call Duration",theme:"light",body:"".concat(Number(null!==s&&void 0!==s?s:0).toFixed(2)," Min"),perToday:!0})]})]})]})}var re=n(164),ie={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};function ce(){var e=Object(r.useState)({labels:["1","2","3","4","5","6"],datasets:[{label:"Total Outbound Calls",data:[12,19,3,5,2,3],fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"},{label:"Total Missed Calls",data:[19,11,32,51,21,33],fill:!1},{label:"Total Inbound Calls",data:[2,1,12,51,10,3],fill:!1}]}),t=Object($.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){F().then((function(e){var t=e.map((function(e){return e.label})),n=e.map((function(e){return e.inbound})),r=e.map((function(e){return e.outgoing})),c=e.map((function(e){return e.missed}));i({labels:t,datasets:[{label:"Total Outbound Calls",data:r,fill:!1,backgroundColor:"rgb(110, 55, 110)",borderColor:"rgba(110, 55, 110, 0.2)"},{label:"Total Inbound Calls",data:n,fill:!1,backgroundColor:"rgb(255,157,130)",borderColor:"rgba(255,157,130, 0.2)"},{label:"Total Missed Calls",data:c,fill:!1,backgroundColor:"rgb(201,75,123)",borderColor:"rgba(201,75,123, 0.2)"}]})}))}),[]),Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(O.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Analytics"})}),Object(O.jsx)("div",{style:{display:"flex",flex:1,gap:"1.5em",padding:"2rem"},children:Object(O.jsx)(X,{style:{minHeight:300,width:"100%"},children:Object(O.jsx)(X.Body,{style:{minHeight:300,width:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"0.5em"},children:Object(O.jsx)(re.a,{type:"line",height:70,data:n,options:ie})})})})]})}var oe=n(8),ae=n(159),le=n.n(ae),se=n(160),de=n.n(se),ue=n(68);function je(e){var t,n,i=e.token,c=e.onDisconnect,o=e.callRecordID,a=Object(r.useState)(""),l=Object($.a)(a,2),s=l[0],d=l[1],u=Object(r.useRef)(),j=Object(r.useRef)(),b=Object(r.useState)(!0),m=Object($.a)(b,2),f=m[0],h=m[1],x=Object(r.useRef)("");(Object(r.useEffect)((function(){if(i){var e=new ue.Device(i,{fakeLocalDTMF:!0,enableRingingState:!0});return u.current=e,e.on("ready",(function(){console.log("Twilio.Device Ready!"),d("Ready")})),e.on("error",(function(e){console.log("Twilio.Device Error: "+e.message),d("ERROR: "+e.message)})),e.on("connect",(function(e){console.log("Successfully established call!"),d("In call")})),e.on("disconnect",(function(t){console.log("Disconnected"),d("Disconnect -> Ready"),e.destroy(),c()})),function(){e.disconnectAll(),e.destroy(),c()}}}),[i]),f&&!(null===(t=j.current)||void 0===t?void 0:t.isMuted()))&&(null===(n=j.current)||void 0===n||n.mute(!0));return u?Object(O.jsxs)("div",{style:{marginTop:10},children:[Object(O.jsxs)("h3",{children:["Device Status : ",Object(O.jsx)("code",{children:s})]}),Object(O.jsx)("button",{style:{marginRight:20},onClick:Object(w.a)(k.a.mark((function e(){var t,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.current=o,null===(r=null===(t=u.current)||void 0===t?void 0:t.connect({callRecordID:o,isAdmin:"true"}))||void 0===r||r.mute(!0),j.current=r,null===(n=j.current)||void 0===n||n.mute(!0);case 5:case"end":return e.stop()}}),e)}))),children:"Connect"}),Object(O.jsx)("button",{onClick:function(){var e,t;null===(e=u.current)||void 0===e||e.disconnectAll(),null===(t=u.current)||void 0===t||t.destroy()},children:"Disconnect"}),Object(O.jsxs)("div",{children:["You are ",f?"muted":"not muted",Object(O.jsx)("button",{onClick:function(){var e;h(!f),null===(e=j.current)||void 0===e||e.mute(!f)},children:f?"UnMute":"Mute"})]})]}):Object(O.jsx)("div",{style:{marginTop:10},children:"Creating Device"})}function be(e){var t=e.query,n=e.onDisconnect,i=Object(r.useState)(""),c=Object($.a)(i,2),o=c[0],a=c[1],s=Object(r.useState)(!0),d=Object($.a)(s,2),u=d[0],j=d[1],b=Object(l.g)();return Object(r.useEffect)((function(){B().then(a)}),[]),console.log("Called"),Object(r.useEffect)((function(){u||b.goBack()}),[u,b]),t?Object(O.jsx)("div",{children:o&&u?Object(O.jsx)(je,{token:o,onDisconnect:function(){j(!1),n()},callRecordID:t}):"Loading"}):Object(O.jsx)("div",{children:"Invalid Page"})}var me=n.p+"static/media/barge.a63441f7.jpg",Oe=n.p+"static/media/whispher.b1214fea.jpg";function fe(e){var t=e.liveCalls,n=Object(r.useState)(""),i=Object($.a)(n,2),c=i[0],o=i[1],a=Object(r.useState)(!1),l=Object($.a)(a,2),s=l[0],d=l[1];return Object(O.jsxs)("div",{style:{backgroundColor:"white",padding:"1em",borderRadius:"4px",minHeight:"10em"},children:[Object(O.jsx)(de.a,{isOpen:s,style:{overlay:{zIndex:10}},children:s&&Object(O.jsx)(be,{query:c,onDisconnect:function(){return d(!1)}})}),Object(O.jsxs)("table",{style:{width:"100%"},children:[Object(O.jsxs)("tr",{style:{color:"#6C7A81"},children:[Object(O.jsx)("th",{style:{fontWeight:"normal"},children:"Agent"}),Object(O.jsx)("th",{style:{fontWeight:"normal"},children:"From"}),Object(O.jsx)("th",{style:{fontWeight:"normal"},children:"To"}),Object(O.jsx)("th",{style:{fontWeight:"normal"},children:"Start Time"}),Object(O.jsx)("th",{style:{fontWeight:"normal"},children:"Status"}),Object(O.jsx)("th",{style:{fontWeight:"normal"},children:"Function"})]}),t.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.agent}),Object(O.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.from}),Object(O.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.to}),Object(O.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:new Date(e.startTime).toLocaleTimeString()}),Object(O.jsx)("td",{style:{textAlign:"center",paddingTop:"1em"},children:e.status}),Object(O.jsxs)("td",{style:{textAlign:"center",paddingTop:"1em",cursor:"pointer",display:"flex",justifyContent:"center"},onClick:function(){o(e.id),d(!0)},children:[Object(O.jsx)("img",{src:me,style:{borderRadius:"50%",objectFit:"contain",marginRight:"0.5em"},width:20,alt:""}),Object(O.jsx)("img",{src:Oe,style:{borderRadius:"50%",objectFit:"contain"},width:20,alt:""})]})]})}))]})]})}var he=n(161),xe=i.a.createContext(void 0),ge="START_CONNECTION",pe="USER_ONLINE",ye="USER_LOGOUT",ve="USER_CALL_START",Ce="USER_CALL_END",Te="CALL_ADD",ke="CALL_END",we="CALL_ADD_CSID";function De(e){var t=e.children,n=Object(r.useState)(null),i=Object($.a)(n,2),c=i[0],o=i[1],a=m(),l=a.isAuthenticated,s=a.email;return Object(r.useEffect)((function(){if(l){var e=Object(he.io)("/");e.emit(ge,{email:s}),o(e)}else c&&c.disconnect()}),[l,s]),Object(O.jsx)(xe.Provider,{value:c,children:t})}var Se=function(){return Object(r.useContext)(xe)},Ae=function(e){var t=e.name,n=Object(d.a)(e,["name"]);return Object(O.jsxs)("div",{style:{marginRight:"2rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)(ee,Object(s.a)({},n)),Object(O.jsx)("div",{children:t})]})};function Re(){var e=Se(),t=Object(r.useState)([]),n=Object($.a)(t,2),i=n[0],c=n[1],o=Object(r.useState)([]),a=Object($.a)(o,2),l=a[0],s=a[1];return Object(r.useEffect)((function(){I().then((function(e){c(e)})),e.on(pe,(function(e){console.log("User Online",e),c((function(t){return[].concat(Object(oe.a)(t),[e])}))})),e.on(ye,(function(e){console.log("User Offline",e),c((function(t){return t.filter((function(t){return t.id!==e.id}))}))})),e.on(Te,(function(e){console.log("Call Started",e),s((function(t){return[].concat(Object(oe.a)(t),[e])}))})),e.on(ke,(function(e){console.log("Call Ended",e),s((function(t){return t.filter((function(t){return t.id!==e.id}))}))}))}),[]),Object(O.jsxs)("div",{style:{flex:1},children:[Object(O.jsx)("div",{style:{backgroundColor:"white",paddingLeft:"1.5rem"},children:Object(O.jsx)("div",{style:{padding:"0 1.2rem 0.8rem 1.2rem",borderBottom:"5px solid #2B3144",width:"fit-content",cursor:"pointer",color:"#6C7A81"},children:"Live Activity"})}),Object(O.jsxs)("div",{style:{background:"white",margin:"1.5em 1.5em",padding:"0.75em"},children:[Object(O.jsx)("div",{style:{color:"#4f5f68",marginLeft:"1.5em",marginBottom:"1.5em"},children:"Available Person on Call"}),Object(O.jsx)(le.a,{data:i.map((function(e){var t=e.name,n=e.id,r=e.avatarURL;return Object(O.jsx)(Ae,{name:t,size:50,url:r,dotColor:"#05B714"},n)})),wrapperStyle:{width:"100%"},arrowLeft:Object(O.jsx)(P.c,{size:32}),arrowRight:Object(O.jsx)(P.d,{size:32})})]}),Object(O.jsxs)("div",{style:{display:"flex",gap:"1.5em",margin:"2em"},children:[Object(O.jsx)(Z,{title:"Available Agent",body:i.length,style:{flex:1}}),Object(O.jsx)(Z,{title:"Calls In Queue",body:0,style:{flex:1},bodyTheme:"gradient"}),Object(O.jsx)(Z,{title:"Live Calls",body:l.length,style:{flex:1},bodyTheme:"orange"})]}),Object(O.jsx)("div",{style:{marginTop:"1.5em",backgroundColor:"#71386f",color:"white",width:"fit-content",padding:"0.5em 1.5em",marginLeft:"2em",borderRadius:"8px 8px 0 0"},children:"Live Calls"}),Object(O.jsx)("div",{style:{margin:"0 2em",backgroundColor:"#71386f",borderRadius:"0 8px 8px 8px "},children:Object(O.jsx)(fe,{liveCalls:l})})]})}function Ie(e){var t=e.phoneNumber,n=e.token,i=e.onDisconnect,c=Object(r.useState)(""),o=Object($.a)(c,2),a=o[0],l=o[1],s=Object(r.useState)(null),d=Object($.a)(s,2),u=d[0],j=d[1],b=Object(r.useRef)(),m=Se(),f=Object(r.useRef)(""),h=Object(r.useState)(!1),x=Object($.a)(h,2),g=x[0],p=x[1];return Object(r.useEffect)((function(){if(n){var e=new ue.Device(n,{fakeLocalDTMF:!0,enableRingingState:!0});return j(e),e.on("ready",(function(){console.log("Twilio.Device Ready!"),l("Ready")})),e.on("error",(function(e){console.log("Twilio.Device Error: "+e.message),l("ERROR: "+e.message)})),e.on("connect",(function(e){console.log("Successfully established call!"),l("In call with "+t),console.log(e),m.emit(we,{callId:f.current,csid:e.parameters.CallSid}),m.emit(ve,{callID:f.current})})),e.on("disconnect",(function(t){console.log("Disconnected"),l("Disconnect -> Ready"),m.emit(Ce,{callID:f.current}),e.destroy(),i()})),function(){e.disconnectAll(),e.destroy(),i()}}}),[n]),u?Object(O.jsxs)("div",{style:{marginTop:10},children:[Object(O.jsxs)("h3",{children:["Device Status : ",Object(O.jsx)("code",{children:a})]}),Object(O.jsx)("button",{style:{marginRight:20},onClick:Object(w.a)(k.a.mark((function e(){var n,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("+18564153631","+91"+t);case 2:n=e.sent,r=n.callRecordID,f.current=r,i=u.connect({from:"+18564153631",to:"+91"+t,callRecordID:r,isAdmin:"false"}),b.current=i;case 7:case"end":return e.stop()}}),e)}))),children:"Connect"}),Object(O.jsx)("button",{onClick:function(){u.disconnectAll(),u.destroy()},children:"Disconnect"}),Object(O.jsxs)("div",{children:["You are ",g?"muted":"not muted",Object(O.jsx)("button",{onClick:function(){var e;p(!g),null===(e=b.current)||void 0===e||e.mute(!g)},children:g?"UnMute":"Mute"})]})]}):Object(O.jsx)("div",{style:{marginTop:10},children:"Creating Device"})}function Be(){var e=Object(r.useState)(""),t=Object($.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(""),o=Object($.a)(c,2),a=o[0],l=o[1],s=Object(r.useState)(!1),d=Object($.a)(s,2),u=d[0],j=d[1];return Object(r.useEffect)((function(){B().then(l)}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"number",value:n,onChange:function(e){return i(e.target.value)}}),Object(O.jsx)("button",{onClick:function(){return j(!0)},children:"Call"}),u&&Object(O.jsx)(Ie,{phoneNumber:n,token:a,onDisconnect:function(){j(!1)}})]})}function Ee(){var e=m().isAuthenticated;return Object(O.jsx)(a.a,{children:Object(O.jsx)(l.d,{children:Object(O.jsxs)(U.a,{sidebar:Object(O.jsx)(K,{}),docked:e,styles:{sidebar:{backgroundColor:"#2B3144",boxShadow:"none",maxWidth:"15vw",width:"15vw",borderRadius:"0 0.3rem 0.3rem 0"},content:{backgroundColor:"#F2F6F7"}},children:[e&&Object(O.jsx)(q,{}),Object(O.jsx)(l.b,{path:"/login",component:z}),Object(O.jsx)(l.b,{path:"/logout",component:M}),Object(O.jsx)(f,{path:"/call",redirectTo:"/login",children:Object(O.jsx)(Be,{})}),Object(O.jsx)(f,{path:"/live-activity",redirectTo:"/login",children:Object(O.jsx)(Re,{})}),Object(O.jsx)(f,{path:"/analytics",redirectTo:"/login",children:Object(O.jsx)(ce,{})}),Object(O.jsx)(f,{path:"/call-summary",redirectTo:"/login",children:Object(O.jsx)(ne,{})}),Object(O.jsx)(f,{path:"/",redirectTo:"/login",children:Object(O.jsx)(V,{})})]})})})}var Ne=n(11),Le=n(165),Fe=n(162),ze=n.n(Fe),Me=Object(h.b)({name:"notification",initialState:{notifications:[]},reducers:{addNotification:function(e,t){e.notifications.unshift(t.payload)},removeNotification:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t.payload}))}}}),Ue=Me.actions,_e=(Ue.addNotification,Ue.removeNotification,Me.reducer),He=n(51),Pe={key:"root",storage:ze.a},We=Object(Ne.c)({user:C,notification:_e}),Ke=Object(Le.a)(Pe,We),Je=Object(h.a)({reducer:Ke,devTools:!1,middleware:[He.a]}),qe=n(163),Ye=n(67),Ge=Object(Ye.a)(Je);var Qe=function(){return Object(O.jsx)(u.a,{store:Je,children:Object(O.jsx)(qe.a,{loading:null,persistor:Ge,children:Object(O.jsx)(De,{children:Object(O.jsx)(Ee,{})})})})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,382)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))};o.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(Qe,{})}),document.getElementById("root")),Xe()}},[[381,1,2]]]);
//# sourceMappingURL=main.3f711601.chunk.js.map